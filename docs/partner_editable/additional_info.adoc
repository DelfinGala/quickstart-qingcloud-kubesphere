// Add steps as necessary for accessing the software, post-configuration, and testing. Don’t include full usage instructions for your software, but add links to your product documentation for that information.
//Should any sections not be applicable, remove them

== Test the deployment
// If steps are required to test the deployment, add them here. If not, remove the heading

. Log in to the bastion host with the configured key pair and the user name ec2-user. You can get the IP address of the bastion host from the Outputs tab of the AWS CloudFormation console.

 ssh -i "~/.ssh/cap.pem" ec2-user@12.23.34.45

[start=2]
. Verify that the client software was installed through the bastion host:

* Kubectl Version:

 $ kubectl vesion

* Helm Version:

 $ helm version

* AWS CLI Version:

 $ aws -version

* Cf Version:

 $ cf -version

* Git Version

 $ git version

[start=3]
. Verify the health of the Amazon EKS cluster through the bastion host. Use the installed kubectl and helm commands to verify access to the environment and the running state of the cluster and packages. When you see the welcome information outputs in the log, and all Pods are running, it means the installation is successful.

    $ kubectl cluster-info

    $ kubectl get nodes

    $ kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='\{.items[0].metadata.name}') -f

    $ kubectl get pod –all-namespaces

[start=4]
. Retrieve the generated URL of KubeSphere Console from the Outputs list, access it in your browser, and log in the KubeSphere console using *admin/P@88w0rd*.


[#KubeSphereLogin1]
.KubeSphere Login Page
[link=images/image4.png]
image::../images/image4.png[Architecture,width=648,height=439]

[#KubeSphereLogin2]
.KubeSphere Dashboard
[link=images/image5.png]
image::../images/image5.png[Architecture,width=648,height=439]


== Best practices for using {partner-product-short-name} on AWS
// Provide post-deployment best practices for using the technology on AWS, including considerations such as migrating data, backups, ensuring high performance, high availability, etc. Link to software documentation for detailed information.

KubeSphere has eleven pluggable components as we mentioned in the table _KubeSphere System and Pluggable Configuration of link:#option-1-parameters-for-deploying-kubesphere-into-a-new-vpc[Step3]_. By default, KubeSphere will be started with a minimal installation if you do not enable them. You can enable any of them according to your demands. Each component’s resource consumption has been described in https://kubesphere.io/docs/pluggable-components/overview/[KubeSphere Documentation], make sure there are sufficient CPU and memory in your cluster.

The optimal configuration for running KubeSphere Container Platform on an Amazon EKS cluster requires a minimum of one worker node with at least 16 GiB RAM and 4 vGPU. It is highly recommended that you enable these pluggable components to discover the full-stack features and capabilities provided by KubeSphere. If you already have a minimal KubeSphere setup, you can still enable the pluggable components by editing the Cluster Configuration as follows:

At first, please use an admin account to enter into *Cluster Management* and choose the EKS cluster. Select *CRDs* from the left menu, search the keyword *ClusterConfiguration* in the box.


image::../images/image6.png[Architecture,width=648,height=439]

Then you can click into the *ClusterConfiguration* resource page, click *···* from the list and select *Edit YAML.*

image::../images/image7.png[Architecture,width=648,height=439]


Scroll down to the *spec* section, and change the pluggable components from false to true to enable the features as you want. Finally, click *Update* to save the changes and the installation will be started at the backend automatically.

image::../images/image8.png[Architecture,width=648,height=439]

Open the *Web kubectl* from *Toolbox* at the right bottom, then inspect the logs of installation:

 $ kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='\{.items[0].metadata.name}') -f

When you see the information outputs in the logs, it means the pluggable components are ready to use.

== Security
// Provide post-deployment best practices for using the technology on AWS, including considerations such as migrating data, backups, ensuring high performance, high availability, etc. Link to software documentation for detailed information.

*Set up the TLS*: This Quick Start automatically sets up Elastic Load Balancing (ELB) to support the critical services of a KubeSphere cluster. We recommend you to set up the TLS for you Network Load Balancer to establish a secure connection between a client and a server and ensures that all data passed between the client and your load balancer is private, see file:///Users/zhoupengfei/Downloads/TLS%20listeners%20for%20your%20Network%20Load%20Balancer[TLS listeners for your Network Load Balancer] for more details.

*Keep the Secret privately*: KubeSphere supports multi-cluster management in a unified control plane. Please properly save the secrets used to connect to the external cluster, see https://kubesphere.io/docs/multicluster-management/enable-multicluster/direct-connection/[KubeSphere Documentation] for more details.

*Create proper multi-tenant management policies:* KubeSphere is a multi-tenant platform, multi-tenancy in KubeSphere refers to one or more clusters that are shared between different tenants. Please make sure you set the proper roles, rights, and projects for tenants, see https://kubesphere.io/docs/quick-start/create-workspace-and-project/[KubeSphere Documentation] for more details.

*Create proper network policies:* KubeSphere allows administrator to set network policy for different projects (namespaces) and workspaces. To control network communication between in each of your cluster's projects and workspaces, create https://cloud.google.com/kubernetes-engine/docs/how-to/network-policy[network policies] based on your tenants' requirements. As an initial recommendation, you should block traffic between projects that host different tenants' applications, denying all ingress traffic to avoid Pods from one project accidentally sending traffic to Services or databases in other projects.

//== Other useful information
//Provide any other information of interest to users, especially focusing on areas where AWS or cloud usage differs from on-premises usage.

== Getting Started with KubeSphere

When you finish the deployment of this Quick Start, you can refer to https://kubesphere.io/docs/quick-start/admin-quick-start/[Getting Started Guide] from KubeSphere website. There are some hands-on labs and tutorials that can help you to get started with KubeSphere.

== Central Control Plane for Multi-cloud and Multi-cluster Management

If you want to build a hybrid cloud strategy for multi-cloud and multi-cluster management, you can enable the Kubernetes federation to set up a central control plane using KubeSphere. KubeSphere supports application distribution across multiple clusters and cloud providers. It also provides disaster recovery solutions and cross-cluster observability. Please refer to file:///Users/ameighta/Documents/Projects/QuickStart-Projects/QingCloud-KubeSphere/How%20to%20Enable%20the%20Multi-cluster%20Feature[How to Enable Multi-cluster feature] for more details.

== Additional resources

*AWS resources*

* https://aws.amazon.com/getting-started/[Getting Started Resource Center]
* https://docs.aws.amazon.com/general/latest/gr/[AWS General Reference]
* https://docs.aws.amazon.com/general/latest/gr/glos-chap.html[AWS Glossary]

*AWS services*

* https://docs.aws.amazon.com/cloudformation/[AWS CloudFormation]
* https://docs.aws.amazon.com/eks/?id=docs_gateway[Amazon EKS]
* https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html[Amazon EBS]
* https://docs.aws.amazon.com/ec2/[Amazon EC2]
* https://docs.aws.amazon.com/iam/[IAM]
* https://docs.aws.amazon.com/vpc/[Amazon VPC]

*KubeSphere Documentation*

* https://kubesphere.io/[KubeSphere Website]
* https://kubesphere.io/docs/introduction/what-is-kubesphere/[What is KubeSphere]
* https://kubesphere.io/docs/installation/intro/[Installation Guide]
* https://kubesphere.io/docs/installation/pluggable-components/[Introduction to Pluggable Components]
* https://github.com/kubesphere[KubeSphere GitHub]
